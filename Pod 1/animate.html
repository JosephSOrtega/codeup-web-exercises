<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>test</title>
    <link rel="stylesheet" href="animate.css">
    <script src="https://code.jquery.com/jquery-2.2.4.min.js"
            integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

</head>
<body>
<div id="test">

</div>
<button id="attack">Attack</button>
<button id="run">Run</button>
<button id="talk">Talk</button>

<script>
    let counter = 0;
    let runCounter = 0;
    let talkCounter = 0;
    // let seconds = 1000;
    //
    // function randomSeconds() {
    //     seconds = ((Math.ceil(Math.random() * 3) + 2) * 1000);     // returns a random integer from 0 to 9
    //     return seconds
    // }

    function attackEnd() {
        $('#test').css('background-image', 'url(\'pngs/Mis-attackendNormalized.png\')')
        setTimeout(function () {
            idle()
        }, 250) //.25 seconds
    }

    function step() {
        $('#test').css('background-image', 'url(\'pngs/Mis-steppingNormalized.png\')')
        setTimeout(function () {
            runCounter += 1;
            running()
        }, 250) //.25 seconds
    }

    function running() {
        $('#test').css('background-image', 'url(\'pngs/Mis-standingNormalized.png\')')
        setTimeout(function () {
            $('#test').css('background-image', 'url(\'pngs/Mis-steppingNormalized.png\')');
            if (runCounter >= 3) {
                runCounter = 0;
                return idle()
            } else {
                step()
            }
        }, 250) //.25 seconds
    }

    function talking2() {
        $('#test').css('background-image', 'url(\'pngs/Mis-Talk1-Normalized.png\')')
        setTimeout(function () {
            talkCounter += 1;
            talking1()
        }, 250) //.25 seconds
    }

    function talking1() {
        $('#test').css('background-image', 'url(\'pngs/Mis-Talk2-Normalized.png\')')
        setTimeout(function () {
            if (talkCounter >= 2) {
                talkCounter = 0;
                return idle()
            } else {
                talking2()
            }
        }, 250) //.25 seconds
    }

    function idle() {
        if (counter === 0) {
            $('#test').css('background-image', 'url(\'pngs/Mis-idleNormalized.png\')');
            counter += 1;
        } else {
            $('#test').css('background-image', 'url(\'pngs/Mis-standingNormalized.png\')');
            counter -= 1;

        }
    }

    //The good stuff:

    //sets the idle change
    window.onload = function () {
        setInterval(function () {
            idle();
            // randomSeconds();
            // console.log(seconds);
        }, 4000)
    };

    //Attacking
    $('#attack').on('click', function () {
        $('#test').css('background-image', 'url(\'pngs/Mis-attackNormalized.png\')');
        setTimeout(function () {
            attackEnd()
        }, 250) //.25 seconds
    });


    //Running
    $('#run').on('click', function () {
        $('#test').css('background-image', 'url(\'pngs/Mis-steppingNormalized.png\')');
        setTimeout(function () {
            running()
        }, 250) //.25 seconds
    });

    //Talking
    $('#talk').on('click', function () {
        $('#test').css('background-image', 'url(\'pngs/Mis-Talk1-Normalized.png\')');
        setTimeout(function () {
            talking1()
        }, 250) //.25 seconds
    });


</script>
</body>
</html>